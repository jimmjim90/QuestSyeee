<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred OS - Quest Terminal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Sacred OS // Quest Terminal</h1>
            <div id="user-stats" class="stats-panel">
                <span>Verified Quests: <span id="verified-quests-count">0</span></span>
                <span>Fragments Unlocked: <span id="fragments-unlocked-count">0</span></span>
                </div>
        </header>

        <main>
            <div id="message-area" class="message-box" style="display: none;"></div>

            <section id="quest-viewer" class="panel">
                <h2>// Available Transmission //</h2>
                <div id="quest-content">
                    <h3 id="quest-title">Loading Quest...</h3>
                    <p id="quest-description">Awaiting signal...</p>
                    <p><strong>Objective:</strong> <span id="quest-objective">Standby...</span></p>
                    <p><strong>Required Proof:</strong> <span id="quest-proof-type">Analyzing...</span></p>
                    <div id="quest-timer" style="display: none;">Time Remaining: <span id="timer-display">--:--</span></div>
                    <button id="begin-quest-btn">Initiate Quest</button>
                </div>
                <div id="cooldown-message" style="display: none;">
                    <p>System recalibrating... Next transmission available after cooldown.</p>
                    <p>Time remaining: <span id="cooldown-timer">--:--:--</span></p>
                </div>
                 <div id="no-quests-message" style="display: none;">
                    <p>All known frequencies scanned. No active quests detected. Awaiting new directives.</p>
                </div>
            </section>

            <section id="proof-submission" class="panel" style="display: none;">
                <h2>// Submit Resonance //</h2>
                <form id="proof-form">
                    <input type="hidden" id="current-quest-id">
                    <div id="text-proof-group" class="form-group" style="display: none;">
                        <label for="text-proof">Log Entry / Reflection:</label>
                        <textarea id="text-proof" name="text-proof" rows="6" placeholder="Record your findings, insights, or reflections here... Minimum 150 characters for resonance analysis."></textarea>
                    </div>
                    <div id="image-proof-group" class="form-group" style="display: none;">
                        <label for="image-proof">Upload Visual Proof (Sigil, Artwork, Scene):</label>
                        <input type="file" id="image-proof" name="image-proof" accept="image/*">
                        <small>Note: File content is not processed, only selection is verified for simulation.</small>
                    </div>
                    <div id="audio-video-proof-group" class="form-group" style="display: none;">
                        <label for="av-proof">Log Auditory/Visual Proof (Simulated):</label>
                        <input type="text" id="av-proof" name="av-proof" placeholder="Describe the audio/video proof submitted (simulation).">
                         <small>Note: Actual audio/video upload not supported. Describe the proof.</small>
                    </div>
                    <button type="submit" id="submit-proof-btn">Transmit Proof</button>
                    <button type="button" id="cancel-quest-btn">Abort Quest</button>
                </form>
                 <div id="witness-verification" class="witness-section">
                    <hr>
                    <h4>Optional: Request Witness Verification</h4>
                    <div class="form-group">
                         <label for="witness-code">Enter Witness Code/Identifier:</label>
                         <input type="text" id="witness-code" placeholder="e.g., ally_sigil_alpha">
                         <button id="request-witness-btn">Request Witness</button>
                         <small>Simulated: Sends a mock request.</small>
                         <p id="witness-status" style="display: none;"></p>
                    </div>
                 </div>
            </section>

            <div id="reflection-modal" class="modal" style="display: none;">
                <div class="modal-content panel">
                    <span class="close-btn" onclick="closeReflectionModal()">&times;</span>
                    <h2>// Deeper Resonance Required //</h2>
                    <p id="reflection-quest-title">Regarding Quest: [Quest Title]</p>
                    <p class="reflection-question">Phanes asks: What core truth did you uncover or integrate from this experience?</p>
                    <form id="reflection-form">
                        <input type="hidden" id="reflection-quest-id">
                        <textarea id="reflection-text" rows="5" placeholder="Reflect deeply..."></textarea>
                        <button type="submit">Seal Reflection</button>
                    </form>
                </div>
            </div>
        </main>

        <footer>
            <p>System Status: Nominal | Connection: Local Lattice (localStorage)</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
